<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸”ë¡œê·¸ ë§í¬ ìˆ˜ì§‘ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #0d1b2a 100%);
            min-height: 100vh;
            padding: 30px 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 8px;
            font-size: 2.3rem;
            font-weight: 700;
        }

        .subtitle {
            color: rgba(255,255,255,0.6);
            text-align: center;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }

        .card {
            background: rgba(255,255,255,0.98);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .platform-badges {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .platform-badge {
            padding: 10px 20px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 2px solid;
        }

        .platform-badge.naver { 
            background: #03c75a15; 
            color: #03c75a; 
            border-color: #03c75a40;
        }
        .platform-badge.tistory { 
            background: #eb531115; 
            color: #eb5311; 
            border-color: #eb531140;
        }
        .platform-badge.blogger { 
            background: #ff570015; 
            color: #ff5700; 
            border-color: #ff570040;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }

        input[type="text"] {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #f8fafc;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #6366f1;
            background: white;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        button {
            padding: 15px 24px;
            border: none;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .btn-danger:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #e2e8f0;
        }

        .btn-small {
            padding: 10px 16px;
            font-size: 0.85rem;
        }

        .btn-xs {
            padding: 8px 12px;
            font-size: 0.8rem;
        }

        /* í”Œë«í¼ ê°ì§€ */
        .platform-detect {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        /* ë””ë²„ê·¸ ë¡œê·¸ */
        .debug-section {
            margin-top: 20px;
            padding: 16px;
            background: #1e293b;
            border-radius: 12px;
            max-height: 150px;
            overflow-y: auto;
        }

        .debug-title {
            color: #94a3b8;
            font-size: 0.85rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .debug-log {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.8rem;
            color: #10b981;
            line-height: 1.6;
        }

        .debug-log .error { color: #ef4444; }
        .debug-log .warning { color: #f59e0b; }
        .debug-log .info { color: #3b82f6; }

        /* ì €ì¥ëœ ë¸”ë¡œê·¸ ê´€ë¦¬ */
        .blog-manager {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 2px solid #e2e8f0;
        }

        .blog-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 16px;
            max-height: 250px;
            overflow-y: auto;
        }

        .blog-item {
            display: flex;
            align-items: center;
            padding: 14px 18px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            transition: all 0.2s;
        }

        .blog-item:hover {
            border-color: #6366f1;
        }

        .blog-item-platform {
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 14px;
        }

        .blog-item-platform.naver { background: #03c75a20; color: #03c75a; }
        .blog-item-platform.tistory { background: #eb531120; color: #eb5311; }
        .blog-item-platform.blogger { background: #ff570020; color: #ff5700; }

        .blog-item-info { flex: 1; }
        .blog-item-name { font-weight: 600; color: #1e293b; margin-bottom: 2px; }
        .blog-item-url { font-size: 0.85rem; color: #64748b; }

        .blog-item-actions {
            display: flex;
            gap: 8px;
        }

        .blog-item-actions button {
            padding: 8px 14px;
            font-size: 0.8rem;
        }

        /* í†µê³„ */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: #f8fafc;
            border-radius: 14px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }

        .stat-card.new {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-color: #a7f3d0;
        }

        .stat-card.submitted {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-color: #93c5fd;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: #1e293b;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 4px;
        }

        /* ì§„í–‰ ìƒíƒœ */
        .progress-section { display: none; }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #64748b;
        }

        .progress-bar-container {
            background: #e2e8f0;
            border-radius: 20px;
            height: 16px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 20px;
            transition: width 0.3s;
            width: 0%;
        }

        .progress-bar.collecting::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-status {
            font-size: 0.95rem;
            color: #6366f1;
            font-weight: 600;
            text-align: center;
        }

        /* í•„í„° íƒ­ */
        .filter-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            padding: 6px;
            background: #f1f5f9;
            border-radius: 14px;
            width: fit-content;
        }

        .filter-tab {
            padding: 10px 18px;
            border: none;
            background: transparent;
            font-size: 0.9rem;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .filter-tab:hover { color: #475569; }

        .filter-tab.active {
            background: white;
            color: #6366f1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .filter-count {
            background: #e2e8f0;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            margin-left: 6px;
        }

        .filter-tab.active .filter-count {
            background: #6366f120;
            color: #6366f1;
        }

        /* ë³µì‚¬ ì˜µì…˜ ì˜ì—­ */
        .copy-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #bbf7d0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .copy-section-title {
            font-size: 1rem;
            font-weight: 700;
            color: #166534;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .copy-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 16px;
        }

        .copy-btn {
            padding: 12px 20px;
            border: 2px solid #22c55e;
            background: white;
            color: #16a34a;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn:hover {
            background: #22c55e;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.3);
        }

        .copy-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .copy-btn.active {
            background: #22c55e;
            color: white;
        }

        .copy-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: white;
            border-radius: 10px;
            font-size: 0.9rem;
            color: #166534;
        }

        .copy-info-text strong {
            color: #15803d;
        }

        .copy-range {
            font-size: 0.85rem;
            color: #64748b;
        }

        /* ì•¡ì…˜ ë°” */
        .action-bar {
            display: flex;
            gap: 10px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 14px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
            border: 2px solid #e2e8f0;
        }

        .action-info {
            flex: 1;
            min-width: 200px;
            font-size: 0.95rem;
            color: #475569;
        }

        .action-info strong {
            color: #6366f1;
            font-weight: 700;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        /* ë§í¬ ì»¨í…Œì´ë„ˆ */
        .links-container {
            background: #f8fafc;
            border-radius: 14px;
            padding: 16px;
            max-height: 450px;
            overflow-y: auto;
            border: 2px solid #e2e8f0;
        }

        .link-item {
            display: flex;
            align-items: center;
            padding: 12px 14px;
            background: white;
            border-radius: 10px;
            margin-bottom: 8px;
            border: 2px solid #e2e8f0;
            transition: all 0.2s;
        }

        .link-item:hover { border-color: #6366f1; }

        .link-item.submitted {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-color: #93c5fd;
        }

        .link-item:last-child { margin-bottom: 0; }

        .link-number {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            min-width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            margin-right: 14px;
        }

        .link-item.submitted .link-number {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .link-content { flex: 1; min-width: 0; }

        .link-url {
            font-size: 0.85rem;
            color: #334155;
            word-break: break-all;
        }

        .link-url a {
            color: #334155;
            text-decoration: none;
        }

        .link-url a:hover {
            color: #6366f1;
            text-decoration: underline;
        }

        .link-platform {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 4px;
        }

        .link-status { margin-left: 14px; }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .status-badge.new { background: #dcfce7; color: #166534; }
        .status-badge.submitted { background: #dbeafe; color: #1e40af; }

        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 24px;
        }

        .pagination button {
            width: 46px;
            height: 46px;
            padding: 0;
            font-size: 1.1rem;
        }

        .page-info {
            font-size: 0.95rem;
            color: #64748b;
            font-weight: 600;
            min-width: 100px;
            text-align: center;
        }

        /* í† ìŠ¤íŠ¸ */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #1e293b;
            color: white;
            padding: 16px 32px;
            border-radius: 14px;
            font-size: 0.95rem;
            font-weight: 500;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            max-width: 90%;
            text-align: center;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #94a3b8;
        }

        .empty-state svg {
            width: 70px;
            height: 70px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        /* ëª¨ë‹¬ */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            transform: scale(0.9);
            transition: all 0.3s;
        }

        .modal-overlay.show .modal { transform: scale(1); }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
        }

        .modal-input { margin-bottom: 16px; }

        .modal-input label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: #475569;
            margin-bottom: 8px;
        }

        .modal-input input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
        }

        .modal-input input:focus {
            outline: none;
            border-color: #6366f1;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            body { padding: 20px 15px; }
            h1 { font-size: 1.7rem; }
            .card { padding: 20px; }
            .input-group { flex-direction: column; }
            .stats-container { gap: 10px; }
            .stat-card { padding: 14px; }
            .stat-number { font-size: 1.5rem; }
            .filter-tabs { width: 100%; justify-content: center; }
            .copy-options { justify-content: center; }
            .action-bar { flex-direction: column; }
            .action-buttons { width: 100%; justify-content: center; }
            .blog-item { flex-direction: column; align-items: flex-start; gap: 12px; }
            .blog-item-actions { width: 100%; }
            .blog-item-actions button { flex: 1; }
            .link-item { flex-direction: column; align-items: flex-start; gap: 10px; }
            .link-status { margin-left: 0; align-self: flex-end; }
        }

        /* ìŠ¤í¬ë¡¤ë°” */
        .links-container::-webkit-scrollbar,
        .blog-list::-webkit-scrollbar,
        .debug-section::-webkit-scrollbar {
            width: 8px;
        }

        .links-container::-webkit-scrollbar-track,
        .blog-list::-webkit-scrollbar-track,
        .debug-section::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 4px;
        }

        .links-container::-webkit-scrollbar-thumb,
        .blog-list::-webkit-scrollbar-thumb,
        .debug-section::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”— ë¸”ë¡œê·¸ ë§í¬ ìˆ˜ì§‘ê¸°</h1>
        <p class="subtitle">ë„¤ì´ë²„ ë¸”ë¡œê·¸ Â· í‹°ìŠ¤í† ë¦¬ Â· ë¸”ë¡œê·¸ìŠ¤íŒŸ ë§í¬ë¥¼ ì†ì‰½ê²Œ ìˆ˜ì§‘í•˜ì„¸ìš”</p>

        <!-- ë¸”ë¡œê·¸ ì£¼ì†Œ ì…ë ¥ -->
        <div class="card">
            <div class="section-title">ğŸ“ ë¸”ë¡œê·¸ ì£¼ì†Œ ì…ë ¥</div>
            
            <div class="platform-badges">
                <span class="platform-badge naver">ğŸŸ¢ ë„¤ì´ë²„ ë¸”ë¡œê·¸</span>
                <span class="platform-badge tistory">ğŸŸ  í‹°ìŠ¤í† ë¦¬</span>
                <span class="platform-badge blogger">ğŸŸ§ ë¸”ë¡œê·¸ìŠ¤íŒŸ</span>
            </div>

            <div class="input-group">
                <input type="text" id="blogUrl" placeholder="ë¸”ë¡œê·¸ ì£¼ì†Œ ì…ë ¥ (ì˜ˆ: blog.naver.com/blogid ë˜ëŠ” example.tistory.com)">
                <button class="btn-primary" onclick="addBlog()">â• ì¶”ê°€</button>
                <button class="btn-success" id="startBtn" onclick="startCollect()">ğŸš€ ìˆ˜ì§‘</button>
                <button class="btn-danger" id="stopBtn" onclick="stopCollect()" style="display: none;">â¹ ì •ì§€</button>
            </div>

            <div id="platformDetect"></div>

            <!-- ë””ë²„ê·¸ ë¡œê·¸ -->
            <div class="debug-section" id="debugSection" style="display: none;">
                <div class="debug-title">
                    <span>ğŸ” ìˆ˜ì§‘ ë¡œê·¸</span>
                    <button class="btn-secondary btn-xs" onclick="clearDebugLog()">ì§€ìš°ê¸°</button>
                </div>
                <div class="debug-log" id="debugLog"></div>
            </div>

            <!-- ì €ì¥ëœ ë¸”ë¡œê·¸ ê´€ë¦¬ -->
            <div class="blog-manager" id="blogManager" style="display: none;">
                <div class="section-title">ğŸ’¾ ì €ì¥ëœ ë¸”ë¡œê·¸</div>
                <div class="blog-list" id="blogList"></div>
            </div>
        </div>

        <!-- ì§„í–‰ ìƒíƒœ -->
        <div class="card progress-section" id="progressSection">
            <div class="progress-header">
                <div class="section-title" style="margin-bottom: 0;">â³ ìˆ˜ì§‘ ì§„í–‰ ì¤‘</div>
                <button class="btn-danger btn-small" onclick="stopCollect()">â¹ ì •ì§€</button>
            </div>
            <div class="progress-info">
                <span id="progressPlatform">í”Œë«í¼</span>
                <span id="progressCount">0ê°œ ìˆ˜ì§‘</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar collecting" id="progressBar"></div>
            </div>
            <div class="progress-status" id="progressStatus">ì´ˆê¸°í™” ì¤‘...</div>
        </div>

        <!-- ìˆ˜ì§‘ ê²°ê³¼ -->
        <div class="card" id="resultsSection" style="display: none;">
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">ì „ì²´ ë§í¬</div>
                </div>
                <div class="stat-card new">
                    <div class="stat-number" id="newCount">0</div>
                    <div class="stat-label">ìƒˆ ë§í¬</div>
                </div>
                <div class="stat-card submitted">
                    <div class="stat-number" id="submittedCount">0</div>
                    <div class="stat-label">ì œì¶œë¨</div>
                </div>
            </div>

            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all" onclick="setFilter('all')">
                    ì „ì²´ <span class="filter-count" id="filterAllCount">0</span>
                </button>
                <button class="filter-tab" data-filter="new" onclick="setFilter('new')">
                    ìƒˆ ë§í¬ <span class="filter-count" id="filterNewCount">0</span>
                </button>
                <button class="filter-tab" data-filter="submitted" onclick="setFilter('submitted')">
                    ì œì¶œë¨ <span class="filter-count" id="filterSubmittedCount">0</span>
                </button>
            </div>

            <!-- ë‹¨ìœ„ë³„ ë³µì‚¬ ì„¹ì…˜ -->
            <div class="copy-section">
                <div class="copy-section-title">ğŸ“‹ ìƒˆ ë§í¬ ë‹¨ìœ„ë³„ ë³µì‚¬</div>
                <div class="copy-options" id="copyOptions">
                    <button class="copy-btn" onclick="copyByCount(50)" id="copyBtn50">
                        <span>50ê°œ</span>
                    </button>
                    <button class="copy-btn" onclick="copyByCount(100)" id="copyBtn100">
                        <span>100ê°œ</span>
                    </button>
                    <button class="copy-btn" onclick="copyByCount(150)" id="copyBtn150">
                        <span>150ê°œ</span>
                    </button>
                    <button class="copy-btn" onclick="copyByCount(200)" id="copyBtn200">
                        <span>200ê°œ</span>
                    </button>
                    <button class="copy-btn" onclick="copyAllNew()" id="copyBtnAll" style="border-color: #6366f1; color: #6366f1;">
                        <span>âœ¨ ì „ì²´</span>
                    </button>
                </div>
                <div class="copy-info">
                    <div class="copy-info-text">
                        ë³µì‚¬ ê°€ëŠ¥í•œ ìƒˆ ë§í¬: <strong id="availableNewCount">0</strong>ê°œ
                    </div>
                    <div class="copy-range" id="copyRange">-</div>
                </div>
            </div>

            <!-- ê¸°íƒ€ ì•¡ì…˜ -->
            <div class="action-bar">
                <div class="action-info">
                    í˜„ì¬ ë³´ê¸°: <strong id="currentViewInfo">ì „ì²´</strong>
                </div>
                <div class="action-buttons">
                    <button class="btn-warning btn-small" onclick="copyCurrentPage()">ğŸ“‹ í˜„ì¬ í˜ì´ì§€ ë³µì‚¬</button>
                    <button class="btn-primary btn-small" onclick="copyAllLinks()">ğŸ“‘ ì „ì²´ ë³µì‚¬ (ì œì¶œ í¬í•¨)</button>
                    <button class="btn-secondary btn-small" onclick="resetSubmitted()">ğŸ”„ ì œì¶œ ì´ˆê¸°í™”</button>
                    <button class="btn-danger btn-small" onclick="clearResults()">ğŸ—‘ï¸ ê²°ê³¼ ì‚­ì œ</button>
                </div>
            </div>

            <!-- ë§í¬ ëª©ë¡ -->
            <div class="links-container" id="linksContainer">
                <div class="empty-state">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                    </svg>
                    <p>ìˆ˜ì§‘ëœ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                </div>
            </div>

            <div class="pagination" id="pagination" style="display: none;">
                <button class="btn-secondary" onclick="prevPage()">â—€</button>
                <span class="page-info" id="pageInfo">1 / 1</span>
                <button class="btn-secondary" onclick="nextPage()">â–¶</button>
            </div>
        </div>
    </div>

    <!-- ë¸”ë¡œê·¸ ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-title">âœï¸ ë¸”ë¡œê·¸ ì •ë³´ ìˆ˜ì •</div>
            <div class="modal-input">
                <label>ë¸”ë¡œê·¸ ì´ë¦„ (ì„ íƒ)</label>
                <input type="text" id="editBlogName" placeholder="ë¸”ë¡œê·¸ ì´ë¦„">
            </div>
            <div class="modal-input">
                <label>ë¸”ë¡œê·¸ URL</label>
                <input type="text" id="editBlogUrl" placeholder="ë¸”ë¡œê·¸ ì£¼ì†Œ">
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" onclick="closeEditModal()">ì·¨ì†Œ</button>
                <button class="btn-primary" onclick="saveEditBlog()">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ -->
    <div class="toast" id="toast"></div>

    <script>
        // ==================== ìƒíƒœ ê´€ë¦¬ ====================
        let collectedLinks = [];
        let savedBlogs = JSON.parse(localStorage.getItem('savedBlogs_v5')) || [];
        let submittedLinks = new Set(JSON.parse(localStorage.getItem('submittedLinks_v5')) || []);
        let currentPage = 1;
        let currentFilter = 'all';
        const linksPerPage = 100;
        let isCollecting = false;
        let shouldStop = false;
        let editingBlogIndex = -1;

        // ==================== CORS í”„ë¡ì‹œ ====================
        const PROXIES = [
            { name: 'corsproxy.io', url: (t) => `https://corsproxy.io/?${encodeURIComponent(t)}` },
            { name: 'allorigins', url: (t) => `https://api.allorigins.win/raw?url=${encodeURIComponent(t)}` },
            { name: 'codetabs', url: (t) => `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(t)}` }
        ];
        let currentProxyIndex = 0;

        // ==================== í”Œë«í¼ ì„¤ì • ====================
        const PLATFORMS = {
            naver: {
                name: 'ë„¤ì´ë²„ ë¸”ë¡œê·¸',
                color: '#03c75a',
                patterns: [/blog\.naver\.com\/([^\/\?\#]+)/, /m\.blog\.naver\.com\/([^\/\?\#]+)/]
            },
            tistory: {
                name: 'í‹°ìŠ¤í† ë¦¬',
                color: '#eb5311',
                patterns: [/([a-zA-Z0-9-]+)\.tistory\.com/]
            },
            blogger: {
                name: 'ë¸”ë¡œê·¸ìŠ¤íŒŸ',
                color: '#ff5700',
                patterns: [/([a-zA-Z0-9-]+)\.blogspot\.com/]
            }
        };

        // ==================== ì´ˆê¸°í™” ====================
        document.addEventListener('DOMContentLoaded', () => {
            renderBlogList();
            document.getElementById('blogUrl').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addBlog();
            });
            document.getElementById('blogUrl').addEventListener('input', detectPlatformFromInput);
        });

        // ==================== ë””ë²„ê·¸ ë¡œê·¸ ====================
        function debugLog(message, type = 'info') {
            const section = document.getElementById('debugSection');
            const log = document.getElementById('debugLog');
            section.style.display = 'block';
            const time = new Date().toLocaleTimeString();
            log.innerHTML += `<div class="${type}">[${time}] ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        function clearDebugLog() {
            document.getElementById('debugLog').innerHTML = '';
        }

        // ==================== í”„ë¡ì‹œ ìš”ì²­ ====================
        async function fetchWithProxy(url) {
            for (let i = 0; i < PROXIES.length; i++) {
                const idx = (currentProxyIndex + i) % PROXIES.length;
                const proxy = PROXIES[idx];
                try {
                    debugLog(`í”„ë¡ì‹œ: ${proxy.name}`, 'info');
                    const response = await fetch(proxy.url(url), { signal: AbortSignal.timeout(15000) });
                    if (response.ok) {
                        currentProxyIndex = idx;
                        return response;
                    }
                } catch (e) {
                    debugLog(`${proxy.name} ì‹¤íŒ¨`, 'warning');
                }
            }
            throw new Error('ëª¨ë“  í”„ë¡ì‹œ ì‹¤íŒ¨');
        }

        // ==================== í”Œë«í¼ ê°ì§€ ====================
        function detectPlatform(url) {
            url = normalizeUrl(url);
            for (const [key, platform] of Object.entries(PLATFORMS)) {
                for (const pattern of platform.patterns) {
                    const match = url.match(pattern);
                    if (match) return { type: key, name: platform.name, color: platform.color, id: match[1] };
                }
            }
            return null;
        }

        function detectPlatformFromInput() {
            const input = document.getElementById('blogUrl').value;
            const container = document.getElementById('platformDetect');
            if (!input.trim()) { container.innerHTML = ''; return; }
            
            const platform = detectPlatform(input);
            container.innerHTML = platform 
                ? `<span class="platform-detect" style="background: ${platform.color}15; color: ${platform.color}; border: 2px solid ${platform.color}30;">âœ“ ${platform.name} (${platform.id})</span>`
                : `<span class="platform-detect" style="background: #fee2e2; color: #dc2626;">âš ï¸ ì§€ì›í•˜ì§€ ì•ŠëŠ” í”Œë«í¼</span>`;
        }

        function normalizeUrl(url) {
            url = url.trim();
            if (!url.startsWith('http')) url = 'https://' + url;
            return url.replace(/\/$/, '');
        }

        // ==================== ë¸”ë¡œê·¸ ê´€ë¦¬ ====================
        function addBlog() {
            const input = document.getElementById('blogUrl').value;
            const platform = detectPlatform(input);
            if (!platform) { showToast('âŒ ì§€ì›í•˜ì§€ ì•ŠëŠ” í”Œë«í¼'); return; }
            
            const blogData = { url: normalizeUrl(input), platform: platform.type, name: platform.name, id: platform.id, customName: '' };
            if (savedBlogs.find(b => b.url === blogData.url)) { showToast('âš ï¸ ì´ë¯¸ ì €ì¥ë¨'); return; }
            
            savedBlogs.push(blogData);
            localStorage.setItem('savedBlogs_v5', JSON.stringify(savedBlogs));
            document.getElementById('blogUrl').value = '';
            document.getElementById('platformDetect').innerHTML = '';
            renderBlogList();
            showToast('âœ… ë¸”ë¡œê·¸ ì¶”ê°€ë¨');
        }

        function renderBlogList() {
            const container = document.getElementById('blogList');
            const manager = document.getElementById('blogManager');
            if (savedBlogs.length === 0) { manager.style.display = 'none'; return; }
            
            manager.style.display = 'block';
            container.innerHTML = savedBlogs.map((blog, i) => `
                <div class="blog-item">
                    <span class="blog-item-platform ${blog.platform}">${blog.name}</span>
                    <div class="blog-item-info">
                        <div class="blog-item-name">${blog.customName || blog.id}</div>
                        <div class="blog-item-url">${blog.url}</div>
                    </div>
                    <div class="blog-item-actions">
                        <button class="btn-primary btn-small" onclick="selectBlog(${i})">ì„ íƒ</button>
                        <button class="btn-secondary btn-small" onclick="openEditModal(${i})">ìˆ˜ì •</button>
                        <button class="btn-danger btn-small" onclick="removeBlog(${i})">ì‚­ì œ</button>
                    </div>
                </div>
            `).join('');
        }

        function selectBlog(i) {
            document.getElementById('blogUrl').value = savedBlogs[i].url;
            detectPlatformFromInput();
        }

        function removeBlog(i) {
            if (confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                savedBlogs.splice(i, 1);
                localStorage.setItem('savedBlogs_v5', JSON.stringify(savedBlogs));
                renderBlogList();
                showToast('ğŸ—‘ï¸ ì‚­ì œë¨');
            }
        }

        function openEditModal(i) {
            editingBlogIndex = i;
            document.getElementById('editBlogName').value = savedBlogs[i].customName || '';
            document.getElementById('editBlogUrl').value = savedBlogs[i].url;
            document.getElementById('editModal').classList.add('show');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.remove('show');
            editingBlogIndex = -1;
        }

        function saveEditBlog() {
            if (editingBlogIndex === -1) return;
            const newName = document.getElementById('editBlogName').value.trim();
            const newUrl = document.getElementById('editBlogUrl').value.trim();
            const platform = detectPlatform(newUrl);
            if (!platform) { showToast('âŒ ì§€ì›í•˜ì§€ ì•ŠëŠ” í”Œë«í¼'); return; }
            
            savedBlogs[editingBlogIndex] = { url: normalizeUrl(newUrl), platform: platform.type, name: platform.name, id: platform.id, customName: newName };
            localStorage.setItem('savedBlogs_v5', JSON.stringify(savedBlogs));
            closeEditModal();
            renderBlogList();
            showToast('âœ… ìˆ˜ì •ë¨');
        }

        // ==================== ìˆ˜ì§‘ ì œì–´ ====================
        async function startCollect() {
            if (isCollecting) { showToast('â³ ìˆ˜ì§‘ ì¤‘'); return; }
            
            const input = document.getElementById('blogUrl').value;
            const platform = detectPlatform(input);
            if (!platform) { showToast('âŒ ì˜¬ë°”ë¥¸ ì£¼ì†Œ ì…ë ¥'); return; }

            isCollecting = true;
            shouldStop = false;
            collectedLinks = [];
            currentPage = 1;
            currentFilter = 'all';
            clearDebugLog();

            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('stopBtn').style.display = 'flex';
            document.getElementById('progressSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('progressPlatform').textContent = platform.name;
            document.getElementById('progressCount').textContent = '0ê°œ';
            document.getElementById('progressStatus').textContent = 'ì—°ê²° ì¤‘...';

            resetFilterTabs();
            debugLog(`ìˆ˜ì§‘ ì‹œì‘: ${platform.name} (${platform.id})`);

            try {
                await collectByPlatform(platform, normalizeUrl(input));
                const newCount = collectedLinks.filter(l => !l.submitted).length;
                showToast(shouldStop ? `â¹ ì¤‘ì§€ë¨ (${collectedLinks.length}ê°œ)` : `âœ… ì™„ë£Œ! ${collectedLinks.length}ê°œ (ìƒˆ ë§í¬: ${newCount}ê°œ)`);
            } catch (error) {
                showToast('âŒ ì˜¤ë¥˜ ë°œìƒ');
                debugLog(`ì˜¤ë¥˜: ${error.message}`, 'error');
            } finally {
                isCollecting = false;
                shouldStop = false;
                document.getElementById('startBtn').style.display = 'flex';
                document.getElementById('stopBtn').style.display = 'none';
                document.getElementById('progressSection').style.display = 'none';
            }
        }

        function stopCollect() {
            if (isCollecting) {
                shouldStop = true;
                document.getElementById('progressStatus').textContent = 'ì •ì§€ ì¤‘...';
                showToast('â¹ ì •ì§€ ì¤‘...');
            }
        }

        // ==================== í”Œë«í¼ë³„ ìˆ˜ì§‘ ====================
        async function collectByPlatform(platform, url) {
            switch (platform.type) {
                case 'naver': await collectNaverBlog(platform.id); break;
                case 'tistory': await collectTistory(platform.id, url); break;
                case 'blogger': await collectBlogger(url); break;
            }
            renderLinks();
            updateStats();
            updateCopyButtons();
        }

        // ë„¤ì´ë²„ ë¸”ë¡œê·¸
        async function collectNaverBlog(blogId) {
            let page = 1, hasMore = true, errors = 0;
            
            while (hasMore && !shouldStop && page <= 500) {
                try {
                    updateProgress(collectedLinks.length, `í˜ì´ì§€ ${page}...`);
                    const apiUrl = `https://blog.naver.com/PostTitleListAsync.naver?blogId=${blogId}&currentPage=${page}&countPerPage=30`;
                    const response = await fetchWithProxy(apiUrl);
                    const text = await response.text();
                    
                    let found = 0;
                    try {
                        const data = JSON.parse(text);
                        if (data.postList?.length > 0) {
                            data.postList.forEach(post => {
                                const postUrl = `https://blog.naver.com/${blogId}/${post.logNo}`;
                                if (!collectedLinks.find(l => l.url === postUrl)) {
                                    collectedLinks.push({ url: postUrl, platform: 'naver', submitted: submittedLinks.has(postUrl) });
                                    found++;
                                }
                            });
                            hasMore = data.postList.length >= 30;
                        } else hasMore = false;
                    } catch {
                        const matches = [...text.matchAll(/logNo['":\s]+(\d+)/g)];
                        [...new Set(matches.map(m => m[1]))].forEach(logNo => {
                            const postUrl = `https://blog.naver.com/${blogId}/${logNo}`;
                            if (!collectedLinks.find(l => l.url === postUrl)) {
                                collectedLinks.push({ url: postUrl, platform: 'naver', submitted: submittedLinks.has(postUrl) });
                                found++;
                            }
                        });
                        hasMore = found >= 25;
                    }
                    
                    debugLog(`í˜ì´ì§€ ${page}: ${found}ê°œ`);
                    if (found === 0) { errors++; if (errors >= 2) hasMore = false; }
                    else errors = 0;
                    page++;
                    await sleep(500);
                } catch (e) {
                    debugLog(`ì˜¤ë¥˜: ${e.message}`, 'error');
                    errors++;
                    if (errors >= 3) hasMore = false;
                    await sleep(1500);
                }
            }
        }

        // í‹°ìŠ¤í† ë¦¬
        async function collectTistory(blogId, baseUrl) {
            try {
                debugLog('RSS ìˆ˜ì§‘...');
                updateProgress(0, 'RSS ìˆ˜ì§‘ ì¤‘...');
                await collectFromRSS(`${baseUrl}/rss`, 'tistory');
            } catch (e) { debugLog(`RSS ì‹¤íŒ¨: ${e.message}`, 'warning'); }

            if (!shouldStop && collectedLinks.length < 100) {
                try {
                    debugLog('ì‚¬ì´íŠ¸ë§µ ìˆ˜ì§‘...');
                    await collectFromSitemap(`${baseUrl}/sitemap.xml`, 'tistory');
                } catch (e) { debugLog(`ì‚¬ì´íŠ¸ë§µ ì‹¤íŒ¨`, 'warning'); }
            }

            if (!shouldStop && collectedLinks.length < 50) {
                debugLog('í˜ì´ì§€ í¬ë¡¤ë§...');
                await crawlPages(baseUrl, 'tistory');
            }
        }

        // ë¸”ë¡œê·¸ìŠ¤íŒŸ
        async function collectBlogger(baseUrl) {
            try {
                debugLog('Atom ìˆ˜ì§‘...');
                updateProgress(0, 'Atom ìˆ˜ì§‘ ì¤‘...');
                await collectFromAtom(`${baseUrl}/feeds/posts/default?max-results=500`, 'blogger');
            } catch (e) { debugLog(`Atom ì‹¤íŒ¨`, 'warning'); }

            if (!shouldStop && collectedLinks.length === 0) {
                try {
                    debugLog('RSS ìˆ˜ì§‘...');
                    await collectFromRSS(`${baseUrl}/feeds/posts/default?alt=rss&max-results=500`, 'blogger');
                } catch (e) { debugLog(`RSS ì‹¤íŒ¨`, 'warning'); }
            }

            if (!shouldStop && collectedLinks.length < 50) {
                try {
                    debugLog('ì‚¬ì´íŠ¸ë§µ ìˆ˜ì§‘...');
                    await collectFromSitemap(`${baseUrl}/sitemap.xml`, 'blogger');
                } catch (e) { debugLog(`ì‚¬ì´íŠ¸ë§µ ì‹¤íŒ¨`, 'warning'); }
            }
        }

        // ==================== ê³µí†µ ìˆ˜ì§‘ í•¨ìˆ˜ ====================
        async function collectFromRSS(rssUrl, platform) {
            const response = await fetchWithProxy(rssUrl);
            const text = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(text, 'text/xml');
            
            let count = 0;
            xml.querySelectorAll('item').forEach(item => {
                const url = item.querySelector('link')?.textContent?.trim();
                if (url && !collectedLinks.find(l => l.url === url)) {
                    collectedLinks.push({ url, platform, submitted: submittedLinks.has(url) });
                    count++;
                }
            });
            xml.querySelectorAll('entry').forEach(entry => {
                const url = (entry.querySelector('link[rel="alternate"]') || entry.querySelector('link'))?.getAttribute('href');
                if (url && !collectedLinks.find(l => l.url === url)) {
                    collectedLinks.push({ url, platform, submitted: submittedLinks.has(url) });
                    count++;
                }
            });
            debugLog(`RSS: ${count}ê°œ`);
        }

        async function collectFromAtom(atomUrl, platform) {
            const response = await fetchWithProxy(atomUrl);
            const text = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(text, 'text/xml');
            
            let count = 0;
            xml.querySelectorAll('entry').forEach(entry => {
                const url = (entry.querySelector('link[rel="alternate"]') || entry.querySelector('link'))?.getAttribute('href');
                if (url && !collectedLinks.find(l => l.url === url)) {
                    collectedLinks.push({ url, platform, submitted: submittedLinks.has(url) });
                    count++;
                }
            });
            debugLog(`Atom: ${count}ê°œ`);
        }

        async function collectFromSitemap(sitemapUrl, platform) {
            const response = await fetchWithProxy(sitemapUrl);
            const text = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(text, 'text/xml');
            
            const sitemaps = xml.querySelectorAll('sitemap loc');
            if (sitemaps.length > 0) {
                for (const loc of sitemaps) {
                    if (shouldStop) break;
                    try { await collectFromSitemap(loc.textContent.trim(), platform); await sleep(300); }
                    catch (e) {}
                }
                return;
            }
            
            let count = 0;
            xml.querySelectorAll('url loc').forEach(el => {
                const url = el.textContent?.trim();
                if (url && !collectedLinks.find(l => l.url === url) && 
                    !url.includes('/category/') && !url.includes('/tag/') && !url.includes('/page/')) {
                    collectedLinks.push({ url, platform, submitted: submittedLinks.has(url) });
                    count++;
                }
            });
            debugLog(`ì‚¬ì´íŠ¸ë§µ: ${count}ê°œ`);
        }

        async function crawlPages(baseUrl, platform) {
            let page = 1, empty = 0;
            while (!shouldStop && page <= 100 && empty < 3) {
                try {
                    updateProgress(collectedLinks.length, `í¬ë¡¤ë§ ${page}...`);
                    const pageUrl = platform === 'tistory' ? `${baseUrl}/?page=${page}` : `${baseUrl}/page/${page}`;
                    const response = await fetchWithProxy(pageUrl);
                    const html = await response.text();
                    
                    let found = 0;
                    const patterns = [
                        new RegExp(`href=["'](${baseUrl.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}/(\\d+))["']`, 'g'),
                        /href=["']\/([\d]+)["']/g,
                        /href=["']([^"']*\/entry\/[^"']+)["']/g
                    ];
                    
                    for (const pattern of patterns) {
                        let match;
                        while ((match = pattern.exec(html)) !== null) {
                            let postUrl = match[1];
                            if (postUrl.startsWith('/')) postUrl = baseUrl + postUrl;
                            if (/^\d+$/.test(postUrl)) postUrl = `${baseUrl}/${postUrl}`;
                            
                            if (!postUrl.includes('/category/') && !postUrl.includes('/tag/') && 
                                !postUrl.includes('?page=') && !collectedLinks.find(l => l.url === postUrl)) {
                                collectedLinks.push({ url: postUrl, platform, submitted: submittedLinks.has(postUrl) });
                                found++;
                            }
                        }
                    }
                    
                    debugLog(`í˜ì´ì§€ ${page}: ${found}ê°œ`);
                    empty = found === 0 ? empty + 1 : 0;
                    page++;
                    await sleep(600);
                } catch (e) {
                    empty++;
                    await sleep(1000);
                }
            }
        }

        // ==================== UI ì—…ë°ì´íŠ¸ ====================
        function updateProgress(count, status) {
            document.getElementById('progressBar').style.width = Math.min((count / 100) * 100, 95) + '%';
            document.getElementById('progressCount').textContent = `${count}ê°œ`;
            document.getElementById('progressStatus').textContent = status;
        }

        function updateStats() {
            const total = collectedLinks.length;
            const submitted = collectedLinks.filter(l => l.submitted).length;
            const newLinks = total - submitted;

            document.getElementById('totalCount').textContent = total;
            document.getElementById('newCount').textContent = newLinks;
            document.getElementById('submittedCount').textContent = submitted;

            document.getElementById('filterAllCount').textContent = total;
            document.getElementById('filterNewCount').textContent = newLinks;
            document.getElementById('filterSubmittedCount').textContent = submitted;
            document.getElementById('availableNewCount').textContent = newLinks;
        }

        function updateCopyButtons() {
            const newLinks = collectedLinks.filter(l => !l.submitted);
            const count = newLinks.length;

            document.getElementById('copyBtn50').disabled = count < 1;
            document.getElementById('copyBtn100').disabled = count < 1;
            document.getElementById('copyBtn150').disabled = count < 1;
            document.getElementById('copyBtn200').disabled = count < 1;
            document.getElementById('copyBtnAll').disabled = count < 1;

            // ê° ë²„íŠ¼ì— ì‹¤ì œ ë³µì‚¬ë  ê°œìˆ˜ í‘œì‹œ
            document.getElementById('copyBtn50').innerHTML = `<span>50ê°œ</span><small style="opacity:0.7;margin-left:4px">(${Math.min(50, count)})</small>`;
            document.getElementById('copyBtn100').innerHTML = `<span>100ê°œ</span><small style="opacity:0.7;margin-left:4px">(${Math.min(100, count)})</small>`;
            document.getElementById('copyBtn150').innerHTML = `<span>150ê°œ</span><small style="opacity:0.7;margin-left:4px">(${Math.min(150, count)})</small>`;
            document.getElementById('copyBtn200').innerHTML = `<span>200ê°œ</span><small style="opacity:0.7;margin-left:4px">(${Math.min(200, count)})</small>`;
            document.getElementById('copyBtnAll').innerHTML = `<span>âœ¨ ì „ì²´</span><small style="opacity:0.7;margin-left:4px">(${count})</small>`;
        }

        function resetFilterTabs() {
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.filter === 'all') tab.classList.add('active');
            });
        }

        function setFilter(filter) {
            currentFilter = filter;
            currentPage = 1;
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.filter === filter);
            });
            
            const filterNames = { all: 'ì „ì²´', new: 'ìƒˆ ë§í¬', submitted: 'ì œì¶œë¨' };
            document.getElementById('currentViewInfo').textContent = filterNames[filter];
            renderLinks();
        }

        function getFilteredLinks() {
            switch (currentFilter) {
                case 'new': return collectedLinks.filter(l => !l.submitted);
                case 'submitted': return collectedLinks.filter(l => l.submitted);
                default: return collectedLinks;
            }
        }

        function renderLinks() {
            const container = document.getElementById('linksContainer');
            const filtered = getFilteredLinks();
            const total = filtered.length;
            const totalPages = Math.ceil(total / linksPerPage);
            const platformNames = { naver: 'ë„¤ì´ë²„', tistory: 'í‹°ìŠ¤í† ë¦¬', blogger: 'ë¸”ë¡œê·¸ìŠ¤íŒŸ' };

            if (total === 0) {
                container.innerHTML = `<div class="empty-state"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg><p>ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤</p></div>`;
                document.getElementById('pagination').style.display = 'none';
                return;
            }

            const start = (currentPage - 1) * linksPerPage;
            const end = Math.min(start + linksPerPage, total);
            const pageLinks = filtered.slice(start, end);

            container.innerHTML = pageLinks.map((link, i) => `
                <div class="link-item ${link.submitted ? 'submitted' : ''}">
                    <div class="link-number">${start + i + 1}</div>
                    <div class="link-content">
                        <div class="link-url"><a href="${link.url}" target="_blank">${link.url}</a></div>
                        <div class="link-platform">${platformNames[link.platform]}</div>
                    </div>
                    <div class="link-status">
                        <span class="status-badge ${link.submitted ? 'submitted' : 'new'}">${link.submitted ? 'âœ“ ì œì¶œë¨' : 'â— ìƒˆ ë§í¬'}</span>
                    </div>
                </div>
            `).join('');

            document.getElementById('pagination').style.display = totalPages > 1 ? 'flex' : 'none';
            document.getElementById('pageInfo').textContent = `${currentPage} / ${totalPages}`;
        }

        // ==================== í˜ì´ì§€ë„¤ì´ì…˜ ====================
        function prevPage() {
            if (currentPage > 1) { currentPage--; renderLinks(); }
        }

        function nextPage() {
            const totalPages = Math.ceil(getFilteredLinks().length / linksPerPage);
            if (currentPage < totalPages) { currentPage++; renderLinks(); }
        }

        // ==================== ë³µì‚¬ ê¸°ëŠ¥ ====================
        function copyByCount(count) {
            const newLinks = collectedLinks.filter(l => !l.submitted);
            if (newLinks.length === 0) { showToast('âš ï¸ ë³µì‚¬í•  ìƒˆ ë§í¬ ì—†ìŒ'); return; }

            const toCopy = newLinks.slice(0, count);
            const urls = toCopy.map(l => l.url);
            copyToClipboard(urls.join('\n'));

            toCopy.forEach(link => {
                link.submitted = true;
                submittedLinks.add(link.url);
            });

            localStorage.setItem('submittedLinks_v5', JSON.stringify([...submittedLinks]));
            
            const remaining = collectedLinks.filter(l => !l.submitted).length;
            document.getElementById('copyRange').textContent = `1 ~ ${toCopy.length}ë²ˆ ë³µì‚¬ë¨ (ë‚¨ì€ ìƒˆ ë§í¬: ${remaining}ê°œ)`;
            
            renderLinks();
            updateStats();
            updateCopyButtons();
            showToast(`âœ… ${toCopy.length}ê°œ ë³µì‚¬ ì™„ë£Œ!`);
        }

        function copyAllNew() {
            const newLinks = collectedLinks.filter(l => !l.submitted);
            if (newLinks.length === 0) { showToast('âš ï¸ ë³µì‚¬í•  ìƒˆ ë§í¬ ì—†ìŒ'); return; }

            const urls = newLinks.map(l => l.url);
            copyToClipboard(urls.join('\n'));

            newLinks.forEach(link => {
                link.submitted = true;
                submittedLinks.add(link.url);
            });

            localStorage.setItem('submittedLinks_v5', JSON.stringify([...submittedLinks]));
            document.getElementById('copyRange').textContent = `ì „ì²´ ${newLinks.length}ê°œ ë³µì‚¬ë¨`;
            
            renderLinks();
            updateStats();
            updateCopyButtons();
            showToast(`âœ… ${newLinks.length}ê°œ ì „ì²´ ë³µì‚¬ ì™„ë£Œ!`);
        }

        function copyCurrentPage() {
            const filtered = getFilteredLinks();
            const start = (currentPage - 1) * linksPerPage;
            const end = Math.min(start + linksPerPage, filtered.length);
            const pageLinks = filtered.slice(start, end);

            if (pageLinks.length === 0) { showToast('âš ï¸ ë³µì‚¬í•  ë§í¬ ì—†ìŒ'); return; }

            copyToClipboard(pageLinks.map(l => l.url).join('\n'));

            pageLinks.forEach(link => {
                link.submitted = true;
                submittedLinks.add(link.url);
            });

            localStorage.setItem('submittedLinks_v5', JSON.stringify([...submittedLinks]));
            renderLinks();
            updateStats();
            updateCopyButtons();
            showToast(`âœ… ${pageLinks.length}ê°œ ë³µì‚¬ ì™„ë£Œ!`);
        }

        function copyAllLinks() {
            if (collectedLinks.length === 0) { showToast('âš ï¸ ë³µì‚¬í•  ë§í¬ ì—†ìŒ'); return; }

            copyToClipboard(collectedLinks.map(l => l.url).join('\n'));

            collectedLinks.forEach(link => {
                link.submitted = true;
                submittedLinks.add(link.url);
            });

            localStorage.setItem('submittedLinks_v5', JSON.stringify([...submittedLinks]));
            renderLinks();
            updateStats();
            updateCopyButtons();
            showToast(`âœ… ${collectedLinks.length}ê°œ ì „ì²´ ë³µì‚¬ ì™„ë£Œ!`);
        }

        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
            } catch {
                const ta = document.createElement('textarea');
                ta.value = text;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
            }
        }

        // ==================== ì´ˆê¸°í™” ====================
        function resetSubmitted() {
            collectedLinks.forEach(l => l.submitted = false);
            submittedLinks.clear();
            localStorage.setItem('submittedLinks_v5', JSON.stringify([]));
            document.getElementById('copyRange').textContent = '-';
            renderLinks();
            updateStats();
            updateCopyButtons();
            showToast('ğŸ”„ ì œì¶œ ìƒíƒœ ì´ˆê¸°í™”ë¨');
        }

        function clearResults() {
            collectedLinks = [];
            currentPage = 1;
            document.getElementById('copyRange').textContent = '-';
            renderLinks();
            updateStats();
            updateCopyButtons();
            showToast('ğŸ—‘ï¸ ê²°ê³¼ ì‚­ì œë¨');
        }

        // ==================== ìœ í‹¸ë¦¬í‹° ====================
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function sleep(ms) {
            return new Promise(r => setTimeout(r, ms));
        }
    </script>
</body>
</html>
